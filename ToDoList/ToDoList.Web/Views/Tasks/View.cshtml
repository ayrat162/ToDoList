@model ToDoList.Web.ViewModels.TaskViewModel
@{
    ViewBag.Title = "View";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Task Information</h2>
<table class="table table-hover table-striped">
    <thead>
    <tr>
        <th>
            Picture
        </th>
        <th>
            Description
        </th>
        <th>
            Due Date & Time
        </th>
        <th>
            Classification
        </th>
        <th>
            Status
        </th>
        <th>
            User
        </th>
        <th>
            Is Approved?
        </th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>
            @if (@Model.PictureDto!=null)
            {
                @Html.Raw("<img style='width:100px; height:100px;' src=\"data:image/jpeg;base64,"
                          + Convert.ToBase64String(Model.PictureDto.Image) + "\" />")
            }
            else
            {
                <div>N/A</div>
            }
        </td>
        <td>
            @Model.ToDoTaskDto.Description
        </td>
        <td>
            @Model.ToDoTaskDto.DueDateTime
        </td>
        <td>
            @if (@Model.Classifications.SingleOrDefault(c => c.Id == Model.ToDoTaskDto.ClassificationId) != null)
            {
                @Model.Classifications.SingleOrDefault(c => c.Id == Model.ToDoTaskDto.ClassificationId).Name
            }
            else
            {
                @:N/A
            }
        </td>
        <td>
            @Model.ToDoTaskDto.Status
        </td>
        <td>
            @Model.Users.SingleOrDefault(u => u.Id == Model.ToDoTaskDto.UserId).Name
        </td>
        <td>
            @if (Model.ToDoTaskDto.IsApproved)
            {
                <text>Approved</text>
            }
            else
            {
                <div>Not Approved</div>
                @Html.ActionLink("Approve","Approve",Model.ToDoTaskDto.Id)
            }
        </td>
    </tr>
    </tbody>
</table>

